<header class="art-header">
    <div class="art-slides_co art_out_header_slides" id="top_sliders">
        <div class="preloader-wrapper big active" style="margin: auto;">
            <div class="spinner-layer spinner-green-only">
                <div class="circle-clipper left">
                    <div class="circle"></div>
                </div>
                <div class="gap-patch">
                    <div class="circle"></div>
                </div>
                <div class="circle-clipper right">
                    <div class="circle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="art-head-social">
        <a class="art-social-icon" href="<%= lang_('@company_facebook') %>" target="_blank">
        <img src="<%= typeof path !== "undefined"?path:'' %>assets/img/social/facebook2.png" alt="<%= lang_('@company_title') %> Facebook" />
    </a>
        <a class="art-social-icon" href="<%= lang_('@company_linkedin') %>" target="_blank">
        <img src="<%= typeof path !== "undefined"?path:'' %>assets/img/social/linkedin2.png" alt="<%= lang_('@company_title') %> Linkedin" />
    </a>
        <a class="art-social-icon" href="<%= lang_('@company_instagram') %>" target="_blank">
        <img src="<%= typeof path !== "undefined"?path:'' %>assets/img/social/instagram2.png" alt="<%= lang_('@company_title') %> Instagram" />
    </a>
        <a class="art-social-icon" href="<%= lang_('@company_twitter') %>" target="_blank">
        <img src="<%= typeof path !== "undefined"?path:'' %>assets/img/social/twitter2.png" alt="<%= lang_('@company_title') %> Twitter" />
    </a>

    </div>
    <span class="art_stylish_" style="fill:#ffffff"> 
        <svg width="1440" height="195" viewBox="0 0 1440 195" fill="currentColor" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none">
            <path d="M457.815 155.862C277.008 146.247 0 82.6039 0 82.6039V195H1440V82.6039C1440 82.6039 1356.59 51.8217 1305.88 33.9323C956 -89.5001 791.938 173.631 457.815 155.862Z"></path>
        </svg>
    </span>

</header>
<script>
    document.addEventListener("DOMContentLoaded", (e) => {

        axios.get(path + 'api/category').then(res => {
            let data = res.data;

        });
        getStatus();
    });

    function getStatus() {
        function populateStatus(data, _length) {
            let ouSliderTemp = (slider, top_sliders, cb) => {
                let _slider = slider.actions,
                    _do = true;

                if (_slider.length > 1) {
                    _do = !true;
                    lang_(_slider[0].message).then(message => {
                        lang_(_slider[1].message).then(message2 => {
                            top_sliders.innerHTML += `<div class="art_our_slide">
                                <div class="art-head-sec">
                                    <div class="art_head_title">
                                        <h4>${slider.title}</h4>
                                    </div>
                                    <div class="art_head_desc">
                                        ${slider.description}
                                        <div class="art_head_act">
                                            <a href="<%= path %>${_slider[0].path}" class="art_gree_btn filled waves-effect waves-light" target="_blank">${message}<em class="material-icons">chevron_right</em></a>
                                            <a href="<%= path %>${_slider[1].path}" class="art_gree_btn waves-effect waves-light" target="_blank">${message2}<em class="material-icons">chevron_right</em></a>
                                            
                                        </div>
                                    </div>
                                </div>
                                <div class="art_slider_img">
                                    <img src="${slider.previewImage.file}" alt="${slider.previewImage.title}" />
                                </div>
                            </div>`;

                            if (cb && !_do) {
                                cb(top_sliders)
                            }

                        });
                    });

                } else {
                    lang_(_slider[0].message).then(message => {
                        top_sliders.innerHTML += `<div class="art_our_slide">
                            <div class="art-head-sec">
                                <div class="art_head_title">
                                    <h4>${slider.title}</h4>
                                </div>
                                <div class="art_head_desc">
                                    ${slider.description}
                                    <div class="art_head_act">
                                        <a href="<%= path %>${_slider[0].path}" class="art_gree_btn filled waves-effect waves-light" target="_blank">${message}<em class="material-icons">chevron_right</em></a>
                                        
                                    </div>
                                </div>
                            </div>
                            <div class="art_slider_img">
                                <img src="${slider.previewImage.file}" alt="${slider.previewImage.title}" />
                            </div>
                        </div>`;

                        if (cb && _do) {
                            cb(top_sliders)
                        }
                    });
                }
            }

            top_sliders = document.querySelector("#top_sliders");

            if (top_sliders) {
                top_sliders.innerHTML = '';
                let slider = data;

                lang_(slider.title).then(name => {
                    slider.title = name;
                    lang_(slider.description).then(desc => {
                        slider.description = desc;
                        ouSliderTemp(slider, top_sliders, function(top_sliders) {
                            if (top_sliders.querySelector('.art_our_slide')) {
                                if (top_sliders.querySelectorAll('.art_our_slide').length >= _length && top_sliders.innerHTML !== '') {
                                    headerSlidersInitial();
                                }
                            }
                        });
                    });
                });
            }
        }

        axios.get(path + 'api/status').then(res => {
            let data = res.data;
            if (data.length) {
                let _length = data.length;
                data.map(field => {
                    field.fields.description = field.fields.description.content[0].content[0].value
                    field.fields.previewImage = {
                        title: field.fields.previewImage.fields.title,
                        file: field.fields.previewImage.fields.file.url,
                    }

                    populateStatus(field.fields, _length)
                })
            }
        })
    }

    function headerSlidersInitial() {
        // Slick settings
        $('.art_out_header_slides').slick({
            dots: true,
            centerMode: false,
            arrows: false,
            centerPadding: '60px',
            initialSlide: 0,
            slidesToShow: 1,

            autoplay: true,
            autoplaySpeed: 2000,

            prevArrow: '<button type="button" class="art_slick_btn prev slick-prev"><em class="material-icons">chevron_left</em></button>',
            nextArrow: '<button type="button" class="art_slick_btn next slick-prev"><em class="material-icons">chevron_right</em></button>',
            infinite: false,
            responsive: [{
                breakpoint: 320,
                settings: {
                    arrows: false,
                    slidesToShow: 1
                }
            }, {
                breakpoint: 768,
                settings: {
                    arrows: false,
                    dots: false,
                    slidesToShow: 1
                }
            }, {
                breakpoint: 1204,
                settings: {
                    arrows: false,
                    centerMode: false,
                    dots: true,
                    centerPadding: '40px',
                    slidesToShow: 1
                }
            }]
        });
    }
</script>